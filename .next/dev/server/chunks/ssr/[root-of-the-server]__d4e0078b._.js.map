{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/w/Documents/My%20Future/Website/EmpowerTVET%20Ecosystem/empowertvet-ecosystem/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const db = globalForPrisma.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KAAK,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAE5D,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/w/Documents/My%20Future/Website/EmpowerTVET%20Ecosystem/empowertvet-ecosystem/lib/actions/stats.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { db } from \"@/lib/db\"\r\n\r\nconst THRESHOLD = 10\r\nexport async function getLandingStats() {\r\n  try {\r\n    // 1. Students Trained: Count students + alumni\r\n    const studentsCount = await db.user.count({\r\n      where: {\r\n        role: {\r\n          in: [\"student\", \"alumni\"],\r\n        },\r\n      },\r\n    })\r\n\r\n    // 2. Active Programs: Count published courses\r\n    const activeProgramsCount = await db.course.count({\r\n      where: {\r\n        published: true,\r\n      },\r\n    })\r\n\r\n    // 3. Employment Rate: (Accepted Applications / Total Applications) * 100\r\n    const totalApplications = await db.application.count()\r\n    const acceptedApplications = await db.application.count({\r\n      where: {\r\n        status: \"accepted\",\r\n      },\r\n    })\r\n\r\n    const employmentRate =\r\n      totalApplications >= THRESHOLD\r\n        ? Math.round((acceptedApplications / totalApplications) * 100)\r\n        : 0\r\n\r\n    // 4. Graduate Startups\r\n    const uniqueSellers = await db.product.findMany({\r\n      distinct: [\"sellerId\"],\r\n      select: {\r\n        sellerId: true,\r\n      },\r\n    })\r\n    const graduateStartupsCount = uniqueSellers.length\r\n\r\n    // 5. Total Revenue\r\n    const products = await db.product.findMany({\r\n      select: {\r\n        price: true,\r\n      },\r\n    })\r\n    const totalRevenue = products.reduce((acc, curr) => acc + curr.price, 0)\r\n\r\n    // 6. Women Participants\r\n    const womenParticipants = 0\r\n\r\n    // 7. Donors\r\n    const donorsCount = await db.user.count({\r\n      where: {\r\n        role: \"donor\",\r\n      },\r\n    })\r\n\r\n    // 8. Scholarships\r\n    const scholarshipsCount = await db.enrollment.count()\r\n\r\n    // 9. Communities\r\n    const jobLocations = await db.job.findMany({\r\n      distinct: ['location'],\r\n      select: { location: true }\r\n    })\r\n    const communitiesCount = jobLocations.length\r\n\r\n    // 10. Program Funding\r\n    const donations = await db.donation.findMany()\r\n\r\n    let scholarshipFunded = 0\r\n    let womenFunded = 0\r\n    let outreachFunded = 0\r\n\r\n    donations.forEach(d => {\r\n      const cause = (d.cause || '').toLowerCase()\r\n      if (cause.includes('scholarship') || cause.includes('tuition')) {\r\n        scholarshipFunded += d.amount\r\n      } else if (cause.includes('women') || cause.includes('girl')) {\r\n        womenFunded += d.amount\r\n      } else if (cause.includes('rural') || cause.includes('outreach')) {\r\n        outreachFunded += d.amount\r\n      }\r\n    })\r\n\r\n    return {\r\n      studentsTrained: studentsCount,\r\n      activePrograms: activeProgramsCount,\r\n      employmentRate: employmentRate,\r\n      graduateStartups: graduateStartupsCount,\r\n      totalRevenue: totalRevenue,\r\n      womenParticipants: womenParticipants,\r\n      donorsCount: donorsCount,\r\n      scholarshipsCount: scholarshipsCount,\r\n      communitiesCount: communitiesCount,\r\n      programFunding: {\r\n        scholarships: scholarshipFunded,\r\n        women: womenFunded,\r\n        outreach: outreachFunded\r\n      },\r\n      hasEnoughData: {\r\n        employment: totalApplications >= THRESHOLD,\r\n        startups: graduateStartupsCount >= THRESHOLD,\r\n        donors: donorsCount >= THRESHOLD,\r\n        students: studentsCount >= THRESHOLD\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching landing stats:\", error)\r\n    return {\r\n      studentsTrained: 0,\r\n      activePrograms: 0,\r\n      employmentRate: 0,\r\n      graduateStartups: 0,\r\n      totalRevenue: 0,\r\n      womenParticipants: 0,\r\n      donorsCount: 0,\r\n      scholarshipsCount: 0,\r\n      communitiesCount: 0,\r\n      programFunding: {\r\n        scholarships: 0,\r\n        women: 0,\r\n        outreach: 0\r\n      },\r\n      hasEnoughData: {\r\n        employment: false,\r\n        startups: false,\r\n        donors: false,\r\n        students: false\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/w/Documents/My%20Future/Website/EmpowerTVET%20Ecosystem/empowertvet-ecosystem/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getLandingStats as '00a0188eb23f60b1fab7d259aa4a08163eef136ecc'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/w/Documents/My%20Future/Website/EmpowerTVET%20Ecosystem/empowertvet-ecosystem/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/w/Documents/My%20Future/Website/EmpowerTVET%20Ecosystem/empowertvet-ecosystem/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}